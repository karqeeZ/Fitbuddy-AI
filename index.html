<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitBuddy AI | Your Personal Coach</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- THEME VARIABLES --- */
        :root {
            --bg-dark: #09090b;
            --panel-bg: #18181b;
            --volt: #B4F93B;
            --volt-dim: rgba(180, 249, 59, 0.1);
            --text-main: #f4f4f5;
            --text-muted: #a1a1aa;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            overflow-x: hidden;
        }

        /* --- ANIMATED BACKGROUND --- */
        .hero-bg {
            background-color: var(--bg-dark);
            background-image:
                linear-gradient(rgba(180, 249, 59, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(180, 249, 59, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            position: relative;
        }

        .glow-blob {
            position: absolute;
            width: 400px;
            height: 400px;
            background: var(--volt);
            filter: blur(150px);
            opacity: 0.15;
            border-radius: 50%;
            animation: float 10s infinite ease-in-out;
            z-index: 0;
        }

        .glow-1 { top: -100px; left: -100px; animation-delay: 0s; }
        .glow-2 { bottom: 20%; right: -50px; animation-delay: 5s; background: #4ade80; }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, 50px); }
        }

        /* --- APP SHELL (Embedded Chat) --- */
        .app-shell {
            width: 100%;
            height: 700px;
            background-color: var(--panel-bg);
            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            overflow: hidden;
        }

        /* --- HEADER (Inside Chat) --- */
        .chat-header {
            padding: 1rem 1.5rem;
            background: rgba(24, 24, 27, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* --- CHAT AREA --- */
        .chat-viewport {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            scroll-behavior: smooth;
        }

        .chat-viewport::-webkit-scrollbar { width: 5px; }
        .chat-viewport::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 10px; }
        .chat-viewport::-webkit-scrollbar-track { background: transparent; }

        /* --- MESSAGES --- */
        .message-group {
            display: flex;
            gap: 12px;
            margin-bottom: 1.5rem;
            animation: fadeIn 0.2s ease-out forwards;
            opacity: 0;
            transform: translateY(5px);
        }

        .message-group.user { flex-direction: row-reverse; }

        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 1.1rem;
        }

        .bot-avatar { background: #27272a; color: #fff; border: 1px solid #3f3f46; }
        .user-avatar { background: var(--volt); color: #000; }

        .bubble {
            max-width: 85%;
            padding: 12px 18px;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.6;
            position: relative;
            overflow-wrap: break-word;
        }

        .bot-bubble { background: #27272a; color: #e4e4e7; border-top-left-radius: 4px; }
        .user-bubble { background: var(--volt); color: #09090b; font-weight: 500; border-top-right-radius: 4px; }

        /* --- MARKDOWN STYLES --- */
        .prose p { margin-bottom: 0.5rem; }
        .prose p:last-child { margin-bottom: 0; }
        .prose strong { color: inherit; font-weight: 700; }
        .prose ul, .prose ol { margin: 0.5rem 0; padding-left: 1.5rem; }
        .prose ul { list-style-type: disc; }
        .prose ol { list-style-type: decimal; }
        .prose h1, .prose h2, .prose h3 { font-weight: 700; margin-top: 1rem; margin-bottom: 0.5rem; font-size: 1.1em; }

        /* --- INPUT AREA --- */
        .input-dock {
            padding: 1.5rem;
            background: linear-gradient(to top, var(--panel-bg) 90%, transparent);
            z-index: 20;
        }

        .input-bar {
            background: #09090b;
            border: 1px solid #3f3f46;
            border-radius: 16px;
            padding: 8px;
            display: flex;
            align-items: flex-end;
            transition: all 0.2s;
        }

        .input-bar:focus-within { border-color: var(--volt); box-shadow: 0 0 0 1px var(--volt-dim); }

        textarea {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            padding: 10px;
            resize: none;
            height: 44px;
            max-height: 140px;
            outline: none;
            font-family: inherit;
            line-height: 1.4;
        }

        .send-btn {
            background: var(--volt); color: #000; border: none; border-radius: 10px;
            width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: transform 0.1s;
        }
        .send-btn:hover { transform: scale(1.05); }

        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        
        .typing-dots span {
            width: 5px; height: 5px; background: #71717a; border-radius: 50%;
            display: inline-block; margin: 0 2px;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>

<body class="selection:bg-lime-400 selection:text-black">

    <nav class="fixed top-0 left-0 w-full z-50 bg-[#09090b]/80 backdrop-blur-md border-b border-white/5">
        <div class="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
            <a href="#" class="flex items-center gap-2 group">
                <div class="w-3 h-3 bg-lime-400 rounded-full shadow-[0_0_10px_rgba(180,249,59,0.8)] group-hover:scale-125 transition-transform"></div>
                <span class="font-bold text-lg tracking-tight">FitBuddy AI</span>
            </a>
            <div class="hidden md:flex items-center gap-8 text-sm font-medium text-zinc-400">
                <a href="#features" class="hover:text-white transition-colors">Features</a>
                <a href="#chat-section" class="hover:text-white transition-colors">Plan a Workout</a>
                <a href="#contact" class="hover:text-white transition-colors">Contact</a>
            </div>
            <a href="#chat-section" class="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-full text-sm font-medium transition-colors border border-white/5">
                Launch App
            </a>
        </div>
    </nav>

    <section class="relative min-h-screen flex items-center justify-center pt-20 hero-bg overflow-hidden">
        <div class="glow-blob glow-1"></div>
        <div class="glow-blob glow-2"></div>

        <div class="relative z-10 max-w-4xl mx-auto px-6 text-center">
            <div class="inline-block px-3 py-1 mb-6 rounded-full bg-lime-400/10 border border-lime-400/20 text-lime-400 text-xs font-semibold tracking-wide uppercase">
                Powered by Gemini 2.5 Flash & DeepSeek
            </div>
            <h1 class="text-5xl md:text-7xl font-bold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-b from-white to-zinc-500">
                Your Personal Trainer <br> Never Sleeps.
            </h1>
            <p class="text-lg md:text-xl text-zinc-400 mb-10 max-w-2xl mx-auto leading-relaxed">
                Get custom workout plans and expert form correction instantly.<br> No appointments, no expensive fees. Just results.
            </p>
            <div class="flex flex-col md:flex-row items-center justify-center gap-4">
                <a href="#chat-section" class="px-8 py-4 bg-[#B4F93B] hover:bg-[#a3e635] text-black font-bold rounded-xl shadow-[0_0_20px_rgba(180,249,59,0.3)] hover:shadow-[0_0_30px_rgba(180,249,59,0.5)] transition-all transform hover:-translate-y-1">
                    Start Training Now
                </a>
                <a href="#features" class="px-8 py-4 bg-zinc-900 hover:bg-zinc-800 text-white font-medium rounded-xl border border-zinc-700 transition-colors">
                    Learn More
                </a>
            </div>
        </div>
    </section>

    <section id="features" class="py-24 bg-[#09090b] relative z-20">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold mb-4">Why Choose FitBuddy?</h2>
                <p class="text-zinc-400">Everything you need to crush your fitness goals.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8 justify-center">
                <div class="p-8 rounded-2xl bg-zinc-900/50 border border-zinc-800 hover:border-lime-400/50 transition-colors group">
                    <div class="w-12 h-12 bg-lime-400/10 rounded-lg flex items-center justify-center mb-6 group-hover:bg-lime-400 group-hover:text-black transition-colors text-lime-400">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-3">Instant Plans</h3>
                    <p class="text-zinc-400 leading-relaxed">Generate muscle-group-targeted workout routines in seconds based on your available equipment.</p>
                </div>

                <div class="p-8 rounded-2xl bg-zinc-900/50 border border-zinc-800 hover:border-lime-400/50 transition-colors group">
                    <div class="w-12 h-12 bg-lime-400/10 rounded-lg flex items-center justify-center mb-6 group-hover:bg-lime-400 group-hover:text-black transition-colors text-lime-400">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-3">Form Correction</h3>
                    <p class="text-zinc-400 leading-relaxed">Not sure how to do a Deadlift? Ask FitBuddy for youtube links for live demonstrations.</p>
                </div>

                <div class="p-8 rounded-2xl bg-zinc-900/50 border border-zinc-800 hover:border-lime-400/50 transition-colors group">
                    <div class="w-12 h-12 bg-lime-400/10 rounded-lg flex items-center justify-center mb-6 group-hover:bg-lime-400 group-hover:text-black transition-colors text-lime-400">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-3">24/7 Availability</h3>
                    <p class="text-zinc-400 leading-relaxed">Whether it's 5 AM or 11 PM, FitBuddy is ready to train whenever you are.</p>
                </div>

                <div class="p-8 rounded-2xl bg-zinc-900/50 border border-zinc-800 hover:border-lime-400/50 transition-colors group">
                    <div class="w-12 h-12 bg-lime-400/10 rounded-lg flex items-center justify-center mb-6 group-hover:bg-lime-400 group-hover:text-black transition-colors text-lime-400">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="20" x2="18" y2="10"></line>
                            <line x1="12" y1="20" x2="12" y2="4"></line>
                            <line x1="6" y1="20" x2="6" y2="14"></line>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-3">Adaptive Difficulty</h3>
                    <p class="text-zinc-400 leading-relaxed">From Beginner to Advanced. The AI automatically adjusts the intensity to match your experience level.</p>
                </div>

                <div class="p-8 rounded-2xl bg-zinc-900/50 border border-zinc-800 hover:border-lime-400/50 transition-colors group">
                    <div class="w-12 h-12 bg-lime-400/10 rounded-lg flex items-center justify-center mb-6 group-hover:bg-lime-400 group-hover:text-black transition-colors text-lime-400">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 10"></polyline>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-3">Time-Optimized</h3>
                    <p class="text-zinc-400 leading-relaxed">Only have 15 minutes? Enter your duration, and get a perfectly paced routine that maximizes every second.</p>
                </div>

            </div>
        </div>
    </section>

    <section id="chat-section" class="py-20 bg-[#09090b] relative">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-lime-400/5 blur-[120px] rounded-full pointer-events-none"></div>

        <div class="max-w-4xl mx-auto px-4 md:px-0 relative z-10">
            <div class="text-center mb-10">
                <span class="text-lime-400 font-semibold tracking-wider text-sm uppercase">Live Demo</span>
                <h2 class="text-3xl font-bold mt-2">Chat with FitBuddy</h2>
            </div>

            <div class="app-shell">
                <div class="chat-header">
                    <div class="flex items-center gap-3">
                        <div class="w-2 h-2 bg-lime-400 rounded-full shadow-[0_0_8px_rgba(180,249,59,0.8)] animate-pulse"></div>
                        <div>
                            <h1 class="font-bold text-lg tracking-tight text-white">FitBuddy AI</h1>
                            <p class="text-xs text-zinc-500 font-medium">Personal Trainer ‚Ä¢ Online</p>
                        </div>
                    </div>
                    <button onclick="resetSession()" class="text-xs font-medium text-zinc-400 hover:text-white border border-zinc-700 hover:border-zinc-500 px-3 py-1.5 rounded-full transition-colors">
                        New Session
                    </button>
                </div>

                <div id="chatContainer" class="chat-viewport">
                    <div class="message-group bot">
                        <div class="avatar bot-avatar">üí™</div>
                        <div class="bubble bot-bubble">
                            <div class="prose">
                                Ready to work?
                            </div>
                        </div>
                    </div>
                </div>

                <div class="input-dock">
                    <div class="input-bar">
                        <textarea id="userInput" placeholder="E.g., 30 min workout..." rows="1" oninput="autoResize(this)"></textarea>
                        <button id="sendBtn" class="send-btn" onclick="handleSend()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                        </button>
                    </div>
                    <p class="text-center text-xs text-zinc-600 mt-4 select-none">AI can make mistakes. Train safely.</p>
                </div>
            </div>
        </div>
    </section>

    <footer id="contact" class="bg-[#050507] border-t border-white/5 py-12 text-sm">
        <div class="max-w-6xl mx-auto px-6">
            <div class="grid md:grid-cols-4 gap-8 mb-12">
                <div class="col-span-2">
                    <div class="flex items-center gap-2 mb-4">
                        <div class="w-3 h-3 bg-lime-400 rounded-full"></div>
                        <span class="font-bold text-lg text-white">FitBuddy AI</span>
                    </div>
                    <p class="text-zinc-500 max-w-sm">
                        Empowering fitness journeys through intelligent, accessible, and personalized AI coaching.
                    </p>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-4">Company</h4>
                    <ul class="space-y-2 text-zinc-500">
                        <li><a href="#" class="hover:text-lime-400 transition-colors">About</a></li>
                        <li><a href="#" class="hover:text-lime-400 transition-colors">Careers</a></li>
                        <li><a href="#" class="hover:text-lime-400 transition-colors">Blog</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-4">Legal</h4>
                    <ul class="space-y-2 text-zinc-500">
                        <li><a href="#" class="hover:text-lime-400 transition-colors">Terms of Service</a></li>
                        <li><a href="#" class="hover:text-lime-400 transition-colors">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-lime-400 transition-colors">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-4 text-zinc-600">
                <p>&copy; 2025 FitBuddy AI. All rights reserved.</p>
                <div class="flex gap-6">
                    <a href="#" class="hover:text-white transition-colors">Twitter</a>
                    <a href="#" class="hover:text-white transition-colors">Instagram</a>
                    <a href="#" class="hover:text-white transition-colors">LinkedIn</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ==========================================
        // ‚öôÔ∏è CONFIGURATION
        // ==========================================
        const WEBHOOK_URL = 'https://w3naut.app.n8n.cloud/webhook/99c8f926-6555-4aab-a06d-22f827ec00b3';

        // --- Markdown Setup ---
        marked.setOptions({
            breaks: true,
            gfm: true
        });

        const chatContainer = document.getElementById('chatContainer');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');

        // --- Session Management ---
        let sessionId = localStorage.getItem('fit_session_v2');
        if (!sessionId) {
            sessionId = crypto.randomUUID();
            localStorage.setItem('fit_session_v2', sessionId);
        }

        // --- Auto-Expand Textarea ---
        function autoResize(el) {
            el.style.height = 'auto';
            el.style.height = el.scrollHeight + 'px';
        }

        // --- Main Send Logic ---
        async function handleSend() {
            const text = userInput.value.trim();
            if (!text) return;

            // 1. Add User Message
            appendMessage(text, 'user');

            // 2. Clear Input & Reset Height
            userInput.value = '';
            userInput.style.height = '44px';
            userInput.focus();

            // 3. Show Loading Spinner
            const loadingId = appendLoading();

            try {
                // 4. Send to n8n
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chatInput: text,
                        sessionId: sessionId
                    })
                });

                if (!response.ok) throw new Error(`Status: ${response.status}`);

                const data = await response.json();

                // 5. Cleanup & Display
                removeElement(loadingId);

                const reply = data.output || data.text || data.response || "‚ö†Ô∏è I'm online, but I didn't get a text response.";

                appendMessage(reply, 'bot');

            } catch (error) {
                removeElement(loadingId);
                console.error(error);
                appendMessage(`‚ö†Ô∏è **Connection Error**: ${error.message}. Check your n8n workflow.`, 'bot');
            }
        }

        // --- Message Renderer ---
        function appendMessage(text, sender) {
            const div = document.createElement('div');
            div.className = `message-group ${sender}`;

            const avatarIcon = sender === 'bot' ? 'üí™' : 'üë§';
            const bubbleType = sender === 'bot' ? 'bot-bubble' : 'user-bubble';

            let processedContent = text;

            if (sender === 'bot') {
                processedContent = processedContent.replace(/\\n/g, '\n');
                processedContent = DOMPurify.sanitize(marked.parse(processedContent));
            }

            div.innerHTML = `
            <div class="avatar ${sender === 'bot' ? 'bot-avatar' : 'user-avatar'}">${avatarIcon}</div>
            <div class="bubble ${bubbleType}">
                <div class="prose">${processedContent}</div>
            </div>
        `;

            chatContainer.appendChild(div);
            scrollToBottom();
        }

        // --- UI Helpers ---
        function appendLoading() {
            const id = 'loading-' + Date.now();
            const div = document.createElement('div');
            div.id = id;
            div.className = 'message-group bot';
            div.innerHTML = `
            <div class="avatar bot-avatar">üí™</div>
            <div class="bubble bot-bubble">
                <div class="typing-dots"><span></span><span></span><span></span></div>
            </div>
        `;
            chatContainer.appendChild(div);
            scrollToBottom();
            return id;
        }

        function removeElement(id) {
            const el = document.getElementById(id);
            if (el) el.remove();
        }

        function scrollToBottom() {
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function resetSession() {
            if (confirm("Start fresh?")) {
                localStorage.removeItem('fit_session_v2');
                location.reload();
            }
        }

        // Enter Key Handler
        userInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSend();
            }
        });
    </script>

</body>

</html>



